var e=globalThis,t={},n={},a=e.parcelRequireb2a6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequireb2a6=a),(0,a.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>n,set:e=>n=e,enumerable:!0,configurable:!0});var n,a=new Map;n=function(e,t){for(var n=0;n<t.length-1;n+=2)a.set(t[n],{baseUrl:e,path:t[n+1]})}}),a("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["9ynHn","news.64e30fd5.js","8tQWW","navbar_template.70688b89.html","exSp5","news.ca5e792c.css","kpGv1","ratings_template.b5b9b019.html","lrIPr","ratings_template.f602065c.css","bpbYr","news_item_template.2ca78142.html","2bGwG","news_item_template.851513a4.css","386AB","footer_template.0148279e.html","kLM5j","news_list_style.07e92332.css"]'));class i extends HTMLElement{constructor(){super();let e=document.getElementById("news-item").content,t=this.attachShadow({mode:"open"});t.appendChild(e.cloneNode(!0));let n=t.getElementById("ratings-button");n&&n.addEventListener("click",this.callRatingEvent.bind(this))}static get observedAttributes(){return["title","date","source","desc","url","img","time"]}connectedCallback(){this.update()}attributeChangedCallback(){this.update()}update(){let e=this.getAttribute("title"),t=this.getAttribute("date"),n=this.getAttribute("source"),a=this.getAttribute("desc"),i=this.getAttribute("url"),o=this.getAttribute("img"),l=this.getAttribute("time");if(null!=this.shadowRoot){let s=this.shadowRoot.getElementById("title"),r=this.shadowRoot.getElementById("date"),d=this.shadowRoot.getElementById("source"),c=this.shadowRoot.getElementById("desc"),m=this.shadowRoot.getElementById("url"),h=this.shadowRoot.getElementById("img"),u=this.shadowRoot.getElementById("time");null!=s&&(s.textContent=e),null!=r&&(r.textContent=t),null!=d&&(d.textContent=n),null!=c&&(c.textContent=a),null!=m&&null!=i&&(m.href=i),null!=h&&null!=o&&(h.src=o),null!=u&&null!=l&&(u.textContent=`Time passed since post: ${l}`)}}callRatingEvent(){let e=new CustomEvent("rating-clicked",{detail:{article_id:this.getAttribute("article_id")},bubbles:!0,composed:!0});this.dispatchEvent(e)}}class o extends HTMLElement{time=null;constructor(){super();let e=document.getElementById("footer-element").content;this.attachShadow({mode:"open"}).appendChild(e.cloneNode(!0))}connectedCallback(){this.updateTime(),this.time=window.setInterval(()=>this.updateTime(),1e3)}disconnectedCallback(){null!==this.time&&clearInterval(this.time)}updateTime(){let e=new Date().toLocaleTimeString(),t=this.shadowRoot?.getElementById("time");t&&(t.textContent=`Current time: ${e}`),this.dispatchEvent(new CustomEvent("time-updated",{detail:{},bubbles:!0,composed:!0}))}}class l extends HTMLElement{constructor(){super();let e=document.getElementById("navbar-element").content;this.attachShadow({mode:"open"}).appendChild(e.cloneNode(!0))}static get observedAttributes(){return["rating-opened"]}connectedCallback(){this.shadowRoot?.querySelector("#go-back")?.addEventListener("click",()=>{if("true"!=this.getAttribute("rating-opened"))window.location.href="https://alu0101329888.github.io/SYTWC-WebComponents/index.html";else{this.setAttribute("rating-opened","false");let e=new CustomEvent("close-rating",{detail:{},bubbles:!0,composed:!0});this.dispatchEvent(e)}})}attributeChangedCallback(){let e=this.shadowRoot?.querySelector("#go-back");"true"==this.getAttribute("rating-opened")?e.innerText="Close":e.innerText="Go back"}}class s extends HTMLElement{constructor(){super();let e=document.getElementById("ratings-element").content;this.attachShadow({mode:"open"}).appendChild(e.cloneNode(!0))}static get observedAttributes(){return["average","enabled"]}async connectedCallback(){let e="",t=0,n=Math.floor(16*Math.random());for(let a=0;a<n;++a){let n=await fetch("https://whatthecommit.com/index.txt"),a=await n.text(),i=document.createElement("p"),o=Math.floor(5*Math.random());t+=o,e="";for(let t=0;t<=o;++t)e+="★";for(;e.length<5;)e+="☆";i.innerText=a+" - "+e,this.shadowRoot?.getElementById("comments")?.appendChild(i)}t/=n,t=Math.ceil(t),e="";for(let n=0;n<=t;++n)e+="★";for(;e.length<5;)e+="☆";let a=this.shadowRoot?.getElementById("average");a&&(a.innerText="Rating: "+e)}attributeChangedCallback(){let e=this.shadowRoot?.querySelector("#ratings");"true"==this.getAttribute("enabled")?e.style.display="grid":e.style.display="none"}disconnectedCallback(){}}var r={};r=new URL("navbar_template.70688b89.html",import.meta.url).toString();var d={};d=new URL("ratings_template.b5b9b019.html",import.meta.url).toString();var c={};c=new URL("news_item_template.2ca78142.html",import.meta.url).toString();var m={};m=new URL("footer_template.0148279e.html",import.meta.url).toString();var h={};h=new URL("news_list_style.07e92332.css",import.meta.url).toString();class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.loadTemplates()}connectedCallback(){console.log("Connected")}async loadTemplates(){let e=document.createElement("template");e.innerHTML=await (await fetch(new URL(r))).text(),document.body.appendChild(e.content.cloneNode(!0)),customElements.define("navbar-element",l),this.loadNavbar();let t=document.createElement("template");t.innerHTML=await (await fetch(new URL(d))).text(),document.body.appendChild(t.content.cloneNode(!0)),customElements.define("ratings-element",s);let n=document.createElement("template");n.innerHTML=await (await fetch(new URL(c))).text(),document.body.appendChild(n.content.cloneNode(!0)),customElements.define("news-item",i),this.loadNews();let a=document.createElement("template");a.innerHTML=await (await fetch(new URL(m))).text(),document.body.appendChild(a.content.cloneNode(!0)),customElements.define("footer-element",o),this.loadFooter()}loadNavbar(){let e=document.createElement("navbar-element");e.addEventListener("close-rating",e=>{(this.shadowRoot?.querySelectorAll("ratings-element")).forEach(e=>{e.setAttribute("enabled","false")})}),this.shadowRoot?.appendChild(e)}async loadNews(){let e=document.createElement("div");e.id="news-list";let t=document.createElement("style");t.innerHTML=await (await fetch(new URL(h))).text(),this.shadowRoot?.appendChild(t),this.shadowRoot?.appendChild(e);let n=this.shadowRoot?.getElementById("news-list"),a=await fetch("https://newsdata.io/api/1/latest?apikey=pub_577455afabf3e7c3c90e8bdc2510d5cc2dc9f&language=en");(await a.json()).results.forEach(e=>{let t=document.createElement("news-item");t.setAttribute("title",e.title),t.setAttribute("date",e.pubDate),t.setAttribute("source",e.source_name),t.setAttribute("url",e.link),t.setAttribute("article_id",e.article_id),e.description&&t.setAttribute("desc",e.description),e.image_url?t.setAttribute("img",e.image_url):t.setAttribute("img",e.source_icon),this.loadRating(e.article_id),t.addEventListener("rating-clicked",e=>{let t=e.detail.article_id,n=this.shadowRoot?.querySelector(`ratings-element[article_id="${t}"]`);if(n){let e="true"==n.getAttribute("enabled");n.setAttribute("enabled",(!e).toString());let t=this.shadowRoot?.querySelector("navbar-element");t&&t.setAttribute("rating-opened",(!e).toString())}}),null!=n&&n.appendChild(t)})}loadFooter(){let e=document.createElement("footer-element");this.shadowRoot?.appendChild(e),e.addEventListener("time-updated",e=>{this.updateTimes(e)})}loadRating(e){let t=document.createElement("ratings-element");t.setAttribute("article_id",e),this.shadowRoot?.appendChild(t)}updateTimes(e){let{currentTime:t}=e.detail,n=this.shadowRoot?.querySelectorAll("news-item"),a=new Date;n.forEach(e=>{let t=e.getAttribute("date");if(null!=t){let n=new Date(t).getTime(),i=Math.floor((a.getTime()-n)/1e3),o=Math.floor(i/86400),l=Math.floor(i%86400/3600),s=Math.floor(i%3600/60);e.setAttribute("time",`${o.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${(i%60).toString().padStart(2,"0")}`)}})}}customElements.define("news-container",u);const p=document.createElement("news-container");document.getElementById("news-container")?.appendChild(p);
//# sourceMappingURL=news.64e30fd5.js.map
